function getHotelsByLocation(e,t,o){request("http://terminal2.expedia.com/x/hotels?location="+e+","+t+"&radius=5km&apikey="+apiKeys.expedia.key,function(e,t,n){if(e)o(e);else{var n=JSON.parse(n);n.HotelInfoList.HotelInfo.map(updateThumbnailLink),o(n)}})}function updateThumbnailLink(e,t,o){var n=String(e.ThumbnailUrl);console.log(),e.ThumbnailUrl=n.substring(0,n.length-5).concat("b.jpg")}var express=require("express"),request=require("request"),router=express.Router(),apiKeys=require("../config/api-keys.json");router.get("/",function(e,t){getHotelsByLocation(-27.4667,153.0333,function(e){var o=e.HotelInfoList.HotelInfo.slice(0,4);t.render("hotels-main",{hotels:o})})}),router.get("/info/:id?",function(e,t){t.send(e.params.id)}),router.get("/raw",function(e,t){getHotelsByLocation(-27.4667,153.0333,function(e){t.send(e)})}),router.get("*",function(e,t){t.status(404).send("potato")}),module.exports=router;
